<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–û—Ç—á—ë—Ç –≤–æ–¥–∏—Ç–µ–ª—è</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <button type="button" id="profileBtn" class="profile-btn">üë§</button>

  <h2>–û—Ç—á—ë—Ç –æ —Å–º–µ–Ω–µ</h2>
  <h3 id="driverNameDisplay"></h3>

  <form id="reportForm" onsubmit="event.preventDefault();">
    <label>–î–∞—Ç–∞</label>
    <input type="date" id="date" required>
    <label>–ü—Ä–æ–µ–∫—Ç</label>
    <input id="project" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" required list="project-list" maxlength="50">
    <datalist id="project-list"></datalist>
    <label>–¢–µ—Ö–Ω–∏–∫–∞</label>
    <select id="techSelect" required></select>
    <label>–ú–µ—Å—Ç–æ / –ê–¥—Ä–µ—Å</label>
    <input id="address" placeholder="–ì–¥–µ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏" required maxlength="100">
    <label>–°–º–µ–Ω–∞ (–ù–∞—á–∞–ª–æ / –ö–æ–Ω–µ—Ü)</label>
    <div class="row">
      <input type="time" id="shiftStart" required>
      <input type="time" id="shiftEnd" required>
    </div>
    <button type="button" id="addTrailerBtn" class="toggle-btn">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—Ü–µ–ø</button>
    <div id="trailerBlock" style="display:none;">
      <hr>
      <div class="optional-block-header">
        <label>–ü—Ä–∏—Ü–µ–ø</label>
        <button type="button" class="remove-btn" onclick="hideOptionalBlock('trailerBlock', 'addTrailerBtn')">–£–±—Ä–∞—Ç—å</button>
      </div>
      <select id="trailerSelect"></select>
      <button type="button" id="toggleTrailerTimeBtn" class="toggle-btn" style="margin-top: 10px;">
        –í—Ä–µ–º—è –ø—Ä–∏—Ü–µ–ø–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã
      </button>
      <div id="trailerTimeInputs" style="display:none; margin-top: 10px;">
        <label>–ü—Ä–∏—Ü–µ–ø (–ù–∞—á–∞–ª–æ / –ö–æ–Ω–µ—Ü)</label>
        <div class="row">
          <input type="time" id="trailerStart">
          <input type="time" id="trailerEnd">
        </div>
      </div>
    </div>
    <button type="button" id="addKmBtn" class="toggle-btn">+ –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–ø—Ä–æ–±–µ–≥</button>
    <div id="kmBlock" style="display:none;">
       <hr>
       <div class="optional-block-header">
         <label>–ü–µ—Ä–µ–ø—Ä–æ–±–µ–≥ (–∫–º)</label>
         <button type="button" class="remove-btn" onclick="hideOptionalBlock('kmBlock', 'addKmBtn')">–£–±—Ä–∞—Ç—å</button>
       </div>
       <input type="number" id="km" min="0" step="1" value="0">
    </div>
    <button type="button" id="addCommentBtn" class="toggle-btn">+ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
    <div id="commentBlock" style="display:none;">
       <hr>
       <div class="optional-block-header">
         <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
         <button type="button" class="remove-btn" onclick="hideOptionalBlock('commentBlock', 'addCommentBtn')">–£–±—Ä–∞—Ç—å</button>
       </div>
       <textarea id="comment" placeholder="–õ—é–±—ã–µ –¥–µ—Ç–∞–ª–∏, –ø—Ä–æ–±–ª–µ–º—ã, –∑–∞–º–µ—Ç–∫–∏..." rows="3" maxlength="350"></textarea>
    </div>
    
    <div id="cancelEditBtnContainer" style="margin-top: 16px;"></div>
  </form>

  <!-- HTML –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã -->
  <div id="modalProfile" class="modal-overlay">
    <div class="modal-content">
      <h3 id="profileModalTitle">–ü—Ä–æ—Ñ–∏–ª—å –≤–æ–¥–∏—Ç–µ–ª—è</h3>
      <label for="profileNameInput" id="profileNameLabel">–í–∞—à–µ –§–ò–û</label>
      <input type="text" id="profileNameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û">
      <p style="font-size: 0.9em; color: var(--hint-color); margin-top: 8px;" id="profileHint">
        –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏, –∏–º—è –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –æ—Ç—á–µ—Ç–∞—Ö.
      </p>
      
      <div id="profileMenu" style="display: none;">
        <button type="button" id="changeNameMenuBtn" class="toggle-btn">–ò–∑–º–µ–Ω–∏—Ç—å –§–ò–û</button>
        <button type="button" id="loadEditsBtn" class="toggle-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ–Ω—É</button>
      </div>
      
      <div class="modal-actions">
        <button type="button" id="cancelNameBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="saveNameBtn" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <div id="modalReason" class="modal-overlay">
      <div class="modal-content">
        <h3>–ü—Ä–∏—á–∏–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
        <label for="reasonInput">–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É (max 50 —Å–∏–º–≤–æ–ª–æ–≤):</label>
        <input type="text" id="reasonInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –æ—à–∏–±–∫–∞ –≤ –∞–¥—Ä–µ—Å–µ" maxlength="50">
        <div class="modal-actions">
            <button type="button" id="cancelReasonBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" id="saveReasonBtn" class="btn-primary">–ì–æ—Ç–æ–≤–æ</button>
        </div>
      </div>
  </div>


  <!-- –í–ê–ñ–ù–û: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ —Å–∫—Ä–∏–ø—Ç–∞–º -->
  <script src="js/api.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/draft.js"></script>
  <script src="js/history.js"></script>
  <script src="js/profile.js"></script>
  <script src="js/edit.js"></script>
  <script src="js/form.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
