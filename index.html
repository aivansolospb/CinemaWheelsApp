<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–û—Ç—á—ë—Ç –≤–æ–¥–∏—Ç–µ–ª—è</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <button type="button" id="profileBtn" class="profile-btn">üë§</button>

  <h2>–û—Ç—á—ë—Ç –æ —Å–º–µ–Ω–µ</h2>
  <h3 id="driverNameDisplay">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>

  <form id="reportForm" onsubmit="event.preventDefault();">
    <div class="form-group">
      <label for="date">–î–∞—Ç–∞</label>
      <input type="date" id="date" class="required-field">
      <div class="tooltip">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
    </div>
    <div class="form-group">
      <label for="project">–ü—Ä–æ–µ–∫—Ç</label>
      <input id="project" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" list="project-list" maxlength="50" class="required-field">
      <datalist id="project-list"></datalist>
      <div class="tooltip">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
    </div>
    <div class="form-group">
      <label for="techSelect">–¢–µ—Ö–Ω–∏–∫–∞</label>
      <select id="techSelect" class="required-field"></select>
      <div class="tooltip">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
    </div>
    <div class="form-group">
      <label for="address">–ú–µ—Å—Ç–æ / –ê–¥—Ä–µ—Å</label>
      <input id="address" placeholder="–ì–¥–µ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏" maxlength="100" class="required-field">
      <div class="tooltip">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
    </div>
    <div class="form-group">
      <label>–°–º–µ–Ω–∞ (–ù–∞—á–∞–ª–æ / –ö–æ–Ω–µ—Ü)</label>
      <div class="row">
        <input type="time" id="shiftStart" class="required-field">
        <input type="time" id="shiftEnd" class="required-field">
      </div>
      <div class="tooltip">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
    </div>
    
    <hr style="margin: 18px 0;">
    
    <button type="button" id="addTrailerBtn" class="toggle-btn">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—Ü–µ–ø</button>
    <div id="trailerBlock" style="display:none;">
      <div class="optional-block-header">
        <label>–ü—Ä–∏—Ü–µ–ø</label>
        <button type="button" class="remove-btn" onclick="hideOptionalBlock('trailerBlock', 'addTrailerBtn')">–£–±—Ä–∞—Ç—å</button>
      </div>
      <select id="trailerSelect"></select>
      <button type="button" id="toggleTrailerTimeBtn" class="toggle-btn" style="margin-top: 10px;">
        –í—Ä–µ–º—è –ø—Ä–∏—Ü–µ–ø–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã
      </button>
      <div id="trailerTimeInputs" style="display:none; margin-top: 10px;">
        <label>–ü—Ä–∏—Ü–µ–ø (–ù–∞—á–∞–ª–æ / –ö–æ–Ω–µ—Ü)</label>
        <div class="row">
          <input type="time" id="trailerStart">
          <input type="time" id="trailerEnd">
        </div>
      </div>
      <hr style="margin: 18px 0;">
    </div>
    <button type="button" id="addKmBtn" class="toggle-btn">+ –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–ø—Ä–æ–±–µ–≥</button>
    <div id="kmBlock" style="display:none;">
       <div class="optional-block-header">
         <label>–ü–µ—Ä–µ–ø—Ä–æ–±–µ–≥ (–∫–º)</label>
         <button type="button" class="remove-btn" onclick="hideOptionalBlock('kmBlock', 'addKmBtn')">–£–±—Ä–∞—Ç—å</button>
       </div>
       <input type="number" id="km" min="0" step="1" value="0">
       <hr style="margin: 18px 0;">
    </div>
    <button type="button" id="addCommentBtn" class="toggle-btn">+ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
    <div id="commentBlock" style="display:none;">
       <div class="optional-block-header">
         <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
         <button type="button" class="remove-btn" onclick="hideOptionalBlock('commentBlock', 'addCommentBtn')">–£–±—Ä–∞—Ç—å</button>
       </div>
       <textarea id="comment" placeholder="–õ—é–±—ã–µ –¥–µ—Ç–∞–ª–∏, –ø—Ä–æ–±–ª–µ–º—ã, –∑–∞–º–µ—Ç–∫–∏..." rows="3" maxlength="350"></textarea>
       <hr style="margin: 18px 0;">
    </div>
    
    <div id="cancelEditBtnContainer"></div>
  </form>

  <!-- MODAL WINDOWS -->

  <div id="modalPreview" class="modal-overlay">
    <div class="modal-content">
      <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–∞</h3>
      <div id="modalPreviewText" class="preview"></div>
      <div class="modal-actions">
        <button type="button" id="editBtn" class="btn-secondary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button type="button" id="sendBtn" class="btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</button>
      </div>
    </div>
  </div>

  <div id="modalProfile" class="modal-overlay">
    <div class="modal-content">
        <div id="profileMenu">
            <h3>–ü—Ä–æ—Ñ–∏–ª—å –≤–æ–¥–∏—Ç–µ–ª—è</h3>
            <div class="profile-menu-buttons">
              <button type="button" id="changeNameMenuBtn" class="toggle-btn">–ò–∑–º–µ–Ω–∏—Ç—å –§–ò–û</button>
              <button type="button" id="loadEditsBtn" class="toggle-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ–Ω—É</button>
            </div>
            <p id="appVersion" class="app-version"></p>
            <div class="modal-actions">
                <button type="button" id="closeProfileBtn" class="btn-secondary" style="width: 100%;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
        <div id="profileChangeName" style="display: none;">
            <h3>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –§–ò–û</h3>
            <div class="form-group">
              <label for="profileNameInput">–í–∞—à–µ –§–ò–û</label>
              <input type="text" id="profileNameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û">
            </div>
            <p style="font-size: 0.9em; color: var(--hint-color); margin-top: 8px;">
                –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏, –∏–º—è –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –æ—Ç—á–µ—Ç–∞—Ö.
            </p>
            <div class="modal-actions">
                <button type="button" id="cancelNameBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" id="saveNameBtn" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
  </div>

  <div id="modalEditList" class="modal-overlay">
    <div class="modal-content">
      <h3>–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç—á—ë—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
      <div id="editListContainer">
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>
      <div class="modal-actions" style="margin-top: 10px;">
        <button type="button" id="cancelEditListBtn" class="btn-secondary" style="width: 100%;">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  </div>

   <div id="modalReason" class="modal-overlay">
    <div class="modal-content">
      <h3>–ü—Ä–∏—á–∏–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
      <textarea id="reasonInput" placeholder="–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É (max 50 —Å–∏–º–≤–æ–ª–æ–≤)..." rows="3" maxlength="50"></textarea>
      <div class="modal-actions">
        <button type="button" id="cancelReasonBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="submitReasonBtn" class="btn-primary">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <div id="modalConfirm" class="modal-overlay">
    <div class="modal-content">
      <h3 id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
      <p id="confirmText" style="margin: 10px 0;"></p>
      <div class="modal-actions">
        <button type="button" id="confirmCancelBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="confirmOkBtn" class="btn-primary">OK</button>
      </div>
    </div>
  </div>
  
  <!-- SCRIPTS -->
  <script src="js/api.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/draft.js"></script>
  <script src="js/history.js"></script>
  <script src="js/profile.js"></script>
  <script src="js/edit.js"></script>
  <script src="js/form.js"></script>
  <script src="js/main.js"></script>

</body>
</html>
